call main
jump end

fun main

pusha 5
call fact
popr a
printi a # 120
println

#pusha 0
#call fact
#popr a
#printi a # 1
#println

ret

fun fact
popa n

printc 'n'
printc ':'
printi n
println

eq b n 0
jumpz b rec
pushr 1
ret

label rec
sub m n 1
save n
pusha m
call fact
popr a
rest n
printc 'a'
printc '1'
printc ':'
printi a
println
mul a n a
printc 'a'
printc '2'
printc ':'
printi a
println
pushr a
ret

label end
